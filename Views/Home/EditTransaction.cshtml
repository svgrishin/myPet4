@model myPet4.Models.Transactions

@{
    Layout = "~/Views/Shared/_Transaction_layout.cshtml";
}

<form asp-action="SaveTransaction" id="interactiveForm" class="leftItems" >
    <div asp-validation-summary="ModelOnly"></div>
    <label asp-for="@Model.summ"></label>

    <input type="text" asp-for="@Model.summ" />
    <br />

    <label asp-for="@Model.dateOf"></label>

    <input type="date" asp-for="@Model.dateOf" />
    <br />
    <input asp-for="@Model.credit" />

    <label asp-for="@Model.credit" style="width:80%"></label>

    <br />

    <label asp-for="@Model.description"></label>
    <br />
    <textarea asp-for="@Model.description"></textarea>
    <br />
    <hr />
    <div>
        <input asp-action="SaveTransaction" asp-route-id="@Model.id" asp-route-item="@Model.item" type="submit" class="centerButton" value="Сохранить" onclick="FrameUpdate();" />
        <button class="systemButton" asp-action="TransactionsForm" asp-route-id="@Model.item">Отмена</button>
    </div>
</form>


<script>
    {
        function FrameUpdate() {
            //window.parent.postMessage({ message: 'FrameUpdate' });

            //top.document.getElementById("Transactions 2").onload = Frupdt();
            //var x = top.document.getElementById("Transactions 2");
            //alert(x.rea);

            //setTimeout(() => {
            setInterval(() => {
                //alert('Запущено обновление');
                top.document.getElementById("topFrame").contentWindow.location.reload(true);
            }, 1);

            //alert("Запущено обновление");
        };
        //function Frupdt() {
        //    top.document.getElementById("topFrame").contentWindow.location.reload(true);

        //}
    }
</script>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}